var $=function(){"use strict";const t=t=>{const s=new i;return e((()=>{s._=t(),c(s)})),s},s=t=>t instanceof i?t:new i(t),n=[],e=(t,s)=>{const e=[],c=()=>{s&&!s.active||(e.splice(0,e.length).forEach((t=>{t._obs.splice(t._obs.indexOf(c),1)})),n.unshift(e),t(),n.shift().forEach((t=>t._obs.push(c))))};c()},c=t=>{[...t._obs].forEach((t=>t()))};class i{constructor(t){this._=t,this._obs=[]}get(t=!0){return t&&n[0]&&!n[0].includes(this)&&n[0].push(this),this._}to(s){return t((()=>s(this.get())))}watch(t){e((()=>{t(this.get())}))}}class r extends i{constructor(t){super(t)}set(t){this._=t,c(this)}modify(t){t(this._),c(this)}}const o=(t,s=!1)=>!0===s?new i(t):new r(t);return Object.assign(o,{ensure:s,calc:t,sync:e,getAll:t=>t.map((t=>t.get())),ensureAll:t=>t.map((t=>s(t))),isData:t=>t instanceof i}),o}();
